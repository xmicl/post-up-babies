<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë‚´ê°€ ì•„ëŠ” ëª¨ë“  ê·€ìš”ë¯¸ë“¤</title>
  <style>
    body {
      text-align: center;
      font-family: sans-serif;
    }
    .circle-container {
      position: relative;
      margin: 20px auto;
      width: 500px;
      height: 500px;
      border-radius: 50%;
      border: 3px solid #333;
      overflow: hidden;
    }
    img {
      cursor: pointer;
    }
    .flash {
      animation: flash 1s ease;
      font-size: 2em;
      color: red;
      font-weight: bold;
    }
    @keyframes flash {
      0% { opacity: 1; }
      50% { opacity: 0; }
      100% { opacity: 1; }
    }
  </style>
</head>
<body>
  <h1><span class="mobile-break">ë‚´ê°€ ì•„ëŠ” ëª¨ë“ </span> ê·€ìš”ë¯¸ë“¤</h1>
  <p>ê·€ì—¬ìš´ ì• ë“¤ì€ ê°™ì´ ë³´ì</p>
  <button id="startBtn" onclick="showDogs()">ëˆŒëŸ¬ë³´ì„¸ìš”</button>

  <div class="circle-container"></div>

  <script>
    let buttonClickCount = 0; // ë²„íŠ¼ ëˆ„ë¥¸ íšŸìˆ˜ ê¸°ë¡
    let outsideTouchCount = 0; // ëª¨ë°”ì¼ ì› ë°– í„°ì¹˜ íšŸìˆ˜ ê¸°ë¡
    let input = ""; // ì¹˜íŠ¸ ì½”ë“œ ì…ë ¥ ê¸°ë¡

    // ì›ë³¸ ê²Œì„: ë²„íŠ¼ ëˆ„ë¥´ë©´ ë½€ë˜, ì•„ì§€, ëŒ•ëŒ•ë§Œ ëˆ„ì 
    function showDogs() {
      buttonClickCount++;
      const container = document.querySelector(".circle-container");

      const images = ["imag/ë½€ë˜.png","imag/ì•„ì§€.png","imag/ëŒ•ëŒ•.png"];

      for (let i = 0; i < buttonClickCount; i++) {
        images.forEach(src => {
          const img = document.createElement("img");
          img.src = src;
          img.style.position = "absolute";
          img.style.width = "120px";
          moveRandom(img, container);
          container.appendChild(img);
        });
      }
    }

    // ì¹˜íŠ¸ ì½”ë“œ ì…ë ¥ ê°ì§€
    document.addEventListener("keydown", (e) => {
      input += e.key;

      if (
        input.includes("ë¦¬ë ") ||
        input.includes("ì•„ì§€") ||
        input.includes("ëŒ•ëŒ•") ||
        input.includes("ë½€ë˜")
      ) {
        startCheatGame();
        input = "";
      }

      if (input.length > 30) {
        input = input.slice(-30);
      }

      // ESC í‚¤ â†’ ì²« í™”ë©´ ë³µê·€
      if (e.key === "Escape") {
        goToFirstPage();
      }
    });

    // ì¹˜íŠ¸ ê²Œì„ ì‹œì‘
    function startCheatGame() {
      const container = document.querySelector(".circle-container");
      container.innerHTML = `<p>ì ìˆ˜: <span id="score">0</span></p>`;
      flashMessage("ì¹˜íŠ¸ ê²Œì„ ì‹œì‘!");
      let score = 0;

      const movingImages = ["imag/ë½€ë˜.png","imag/ì•„ì§€.png","imag/ëŒ•ëŒ•.png"];
      for (let i = 0; i < buttonClickCount; i++) {
        movingImages.forEach(src => {
          const img = document.createElement("img");
          img.src = src;
          img.style.position = "absolute";
          img.style.width = "100px";
          moveRandom(img, container);

          img.onclick = () => {
            score++;
            document.getElementById("score").textContent = score;
            if(score >= 10) {
              alert("ğŸ‰ ê·€ìš”ë¯¸ ë§ˆìŠ¤í„°!");
            }
          };

          container.appendChild(img);
        });
      }

      // ë¦¬ë  (ë©ˆì¶˜ ì´ë¯¸ì§€ â†’ íƒˆë½ ì²˜ë¦¬)
      const litti = document.createElement("img");
      litti.src = "imag/ë¦¬ë .jpg";
      litti.style.position = "absolute";
      litti.style.width = "120px";
      litti.style.left = "50%";
      litti.style.top = "50%";
      litti.style.transform = "translate(-50%, -50%)";

      litti.onclick = () => {
        flashMessage("íƒˆë½!");
        setTimeout(() => {
          container.innerHTML = "<p>ê²Œì„ ì¢…ë£Œ</p>";
        }, 1000);
      };

      container.appendChild(litti);
    }

    // ëœë¤ ì´ë™
    function moveRandom(img, container) {
      setInterval(() => {
        const maxX = container.clientWidth - 120;
        const maxY = container.clientHeight - 120;
        img.style.left = Math.random() * maxX + "px";
        img.style.top = Math.random() * maxY + "px";
      }, 500);
    }

    // ë©”ì‹œì§€ ë²ˆì© íš¨ê³¼
    function flashMessage(text) {
      const container = document.querySelector(".circle-container");
      const msg = document.createElement("div");
      msg.textContent = text;
      msg.className = "flash";
      container.appendChild(msg);
      setTimeout(() => msg.remove(), 1000);
    }

    // ì²« í™”ë©´ ë³µê·€
    function goToFirstPage() {
      const container = document.querySelector(".circle-container");
      container.innerHTML = `
        <h1><span class="mobile-break">ë‚´ê°€ ì•„ëŠ” ëª¨ë“ </span> ê·€ìš”ë¯¸ë“¤</h1>
        <p>ê·€ì—¬ìš´ ì• ë“¤ì€ ê°™ì´ ë³´ì</p>
        <button id="startBtn" onclick="showDogs()">ëˆŒëŸ¬ë³´ì„¸ìš”</button>
      `;
      buttonClickCount = 0; // ì´ˆê¸°í™”
    }

    // ëª¨ë°”ì¼: ì› ë°– ë‘ ë²ˆ í„°ì¹˜ â†’ ì²« í™”ë©´ ë³µê·€
    document.addEventListener("touchstart", (e) => {
      const container = document.querySelector(".circle-container");

      if (!container.contains(e.target)) {
        outsideTouchCount++;
        if (outsideTouchCount >= 2) {
          goToFirstPage();
          outsideTouchCount = 0;
        }
      } else {
        outsideTouchCount = 0;
      }
    });
  </script>
</body>
</html>
